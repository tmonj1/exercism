Zebraはまだバグがある。`apply` の全制約適用をコメントアウトすると顕在化する (まちがった結果が出力される)。

現在のロジックでは、`try_apply`で割り付け可能な場所に割り付けて行き、どこかで割り付け不可能になったらバックトラックするというもの。ただし、割り付け可能な場所の判定はこれから割り付けようとしている一つの制約のみしかみていないため、割り付けた結果、すでに割り付け済みの制約が制約違反を起こしている可能性がある。最終的な制約が十分にきつければさらに割り付けていくうちにどこかで違反が検知される可能性が高いが、そうでない場合は制約違反のある結果が最終的にパスしてしまう。

これを回避するには、`try_apply`で全制約を考慮して割り付けること。つまり仮割付後、`check_constrains` のような関数を追加して全制約についてチェックし、制約違反があれば次の候補を見るようなロジックを入れる必要がある。

本来は制約を割り付けるのではなく、ランダムにプロパティ値を設定し制約を満たしているかどうかを判定するようなロジックのほうが正しそうだが、計算量が心配。制約をそのまま割り付けて行くほうが計算量がかなり少なくなるはず。